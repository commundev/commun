<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.50">


<title data-react-helmet="true">Entity Join Attributes | Commun ðŸŽ©</title>

<meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Entity Join Attributes | Commun ðŸŽ©"><meta data-react-helmet="true" name="description" content="Entities can have a list of join attributes, which are useful for querying related items from any entity."><meta data-react-helmet="true" property="og:description" content="Entities can have a list of join attributes, which are useful for querying related items from any entity."><meta data-react-helmet="true" property="og:url" content="https://commun.dev/docs/entity-join-attributes">

<link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico">


<link rel="stylesheet" href="/styles.50319b54.css">


<link rel="preload" href="/styles.8aeba4de.js" as="script">

<link rel="preload" href="/runtime~main.9c10b0a2.js" as="script">

<link rel="preload" href="/main.1883425d.js" as="script">

<link rel="preload" href="/1.b9dd270e.js" as="script">

<link rel="preload" href="/2.d95b566b.js" as="script">

<link rel="preload" href="/19.fbb4e798.js" as="script">

<link rel="preload" href="/20ac7829.6451f802.js" as="script">

<link rel="preload" href="/17896441.79ce0e51.js" as="script">

<link rel="preload" href="/f9900c8c.0553cc63.js" as="script">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/"><strong class="navbar__title">Commun</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/introduction">Docs</a></div><div class="navbar__items navbar__items--right"><a target="_blank" rel="noopener noreferrer" href="https://github.com/commundev/commun" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/"><strong class="navbar__title">Commun</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/introduction">Docs</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://github.com/commundev/commun" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/installation">Installation</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/entities">Creating Entities</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/entity-settings">Entity Settings</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/entity-permissions">Entity Permissions</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/entity-attributes">Entity Attributes</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/entity-join-attributes">Entity Join Attributes</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/entity-hooks">Entity Hooks</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/entity-indexes">Entity Indexes</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/rest-api">Rest API</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Entity Join Attributes</h1></header><div class="markdown"><p>Entities can have a list of join attributes, which are useful for querying related items from any entity.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="query-type"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#query-type" title="Direct link to heading">#</a>Query Type</h2><ul><li><strong>Find One</strong>: The attribute value will be a single item queried from a specific entity.</li><li><strong>Find Many</strong>: The attribute value will be a list of items queried from a specific entity.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="query"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#query" title="Direct link to heading">#</a>Query</h2><p>A query is composed by a set of key-value conditions, where the keys are attributes from the selected entity.
The result of the query will be the item or items that match all the conditions. Each value can be static or dynamic.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="static-query-values"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#static-query-values" title="Direct link to heading">#</a>Static query values</h3><p>Static values can be any string, number or boolean. The given value will be queried in the Entity Reference and only
items matching the exact value will conform to the condition.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="dynamic-query-values"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#dynamic-query-values" title="Direct link to heading">#</a>Dynamic query values</h3><p>Dynamic values can be used to query items based on information from the current item or the authenticated user.
These values are enclosed within <code>{ }</code>. The keyword <code>this</code> can be used to access data from the current item,
for example <code>{this.id}</code> will query for the ID of the current item.
The keyword <code>user</code> can be used to access data from the authenticated user, for example <code>{user.id}</code>  will query for the
value of the ID of the authenticated user.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="example"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#example" title="Direct link to heading">#</a>Example</h2><p>Let&#x27;s assume two entities: <strong>Posts</strong> and <strong>Likes</strong>. The requirement is to return whether the authenticated user liked or
not a given post. <strong>Likes</strong> has two attributes: <strong>post</strong> and <strong>user</strong> which contain the IDs of the liked post and the
user who liked the post respectively.</p><p>In order to solve this, we can create a join attribute on <strong>Posts</strong> called <strong>viewerLike</strong> which will query the
required data. The join attribute settings will be:</p><p><img src="/img/docs-entity-join-attributes-1.png" alt="Join Attribute Example"></p><p>When fetching a post with the access token of an user who liked it, the post will include in the response a
<strong>viewerLike</strong> attribute, which will contain the queried item from the Likes entity. </p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/commundev/commun/edit/master/website/docs/entity-join-attributes.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/entity-attributes"><div class="pagination-nav__link--sublabel">Previous</div><div class="pagination-nav__link--label">Â« Entity Attributes</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/entity-hooks"><div class="pagination-nav__link--sublabel">Next</div><div class="pagination-nav__link--label">Entity Hooks Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#query-type" class="contents__link">Query Type</a></li><li><a href="#query" class="contents__link">Query</a><ul><li><a href="#static-query-values" class="contents__link">Static query values</a></li><li><a href="#dynamic-query-values" class="contents__link">Dynamic query values</a></li></ul></li><li><a href="#example" class="contents__link">Example</a></li></ul></div></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center"><div>Copyright Â© 2020 Commun. Built with Docusaurus.</div></div></div></footer>
</div>

<script src="/styles.8aeba4de.js"></script>

<script src="/runtime~main.9c10b0a2.js"></script>

<script src="/main.1883425d.js"></script>

<script src="/1.b9dd270e.js"></script>

<script src="/2.d95b566b.js"></script>

<script src="/19.fbb4e798.js"></script>

<script src="/20ac7829.6451f802.js"></script>

<script src="/17896441.79ce0e51.js"></script>

<script src="/f9900c8c.0553cc63.js"></script>


</body>
</html>